<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì¹´ë©”ë¼ í…ŒìŠ¤íŠ¸ ì „ìš©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #111;
      color: #eee;
      margin: 0;
      padding: 16px;
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
    }
    #status {
      margin-top: 8px;
      font-size: 0.85rem;
      color: #ccc;
      white-space: pre-line;
    }
    video {
      width: 100%;
      max-width: 480px;
      background: #000;
      border-radius: 10px;
      margin-top: 12px;
    }
    button {
      margin-top: 12px;
      padding: 10px 16px;
      font-size: 15px;
      border-radius: 999px;
      border: none;
      background: #2a2a2a;
      color: #fff;
    }
    button:active {
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <h1>ğŸ“· ì¹´ë©”ë¼ ë™ì‘ í…ŒìŠ¤íŠ¸</h1>
  <p>ì´ í˜ì´ì§€ëŠ” ì¹´ë©”ë¼ê°€ ë˜ëŠ”ì§€ í™•ì¸ë§Œ í•˜ëŠ” ìš©ë„ë‹¤. ì•ˆ ë˜ë©´ ê¶Œí•œ/ë¸Œë¼ìš°ì € ë¬¸ì œ.</p>

  <button id="startBtn">ì¹´ë©”ë¼ ì¼œê¸°</button>
  <div id="status">ëŒ€ê¸° ì¤‘...</div>
  <video id="video" autoplay playsinline muted></video>

  <script>
    const startBtn = document.getElementById('startBtn');
    const statusEl = document.getElementById('status');
    const video = document.getElementById('video');

    let stream = null;

    async function startCamera() {
      statusEl.textContent = 'ë²„íŠ¼ ëˆŒë¦¼ â†’ ì¹´ë©”ë¼ ìš”ì²­ ì¤‘...';

      try {
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
          statusEl.textContent = 'ì´ ë¸Œë¼ìš°ì €ëŠ” getUserMediaë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
          return;
        }

        if (stream) {
          statusEl.textContent = 'ì´ë¯¸ ì¹´ë©”ë¼ê°€ ì¼œì ¸ ìˆìŠµë‹ˆë‹¤.';
          return;
        }

        stream = await navigator.mediaDevices.getUserMedia({
          video: { facingMode: 'environment' }, // í›„ë©´ ì¹´ë©”ë¼ ìš°ì„ 
          audio: false,
        });

        video.srcObject = stream;

        video.addEventListener(
          'loadedmetadata',
          () => {
            statusEl.textContent =
              'ì¹´ë©”ë¼ ì—°ê²° ì„±ê³µ âœ…\n' +
              'ì‹¤ì œ í•´ìƒë„: ' + video.videoWidth + ' x ' + video.videoHeight;
          },
          { once: true }
        );
      } catch (err) {
        console.error(err);
        statusEl.textContent =
          'ì¹´ë©”ë¼ ì˜¤ë¥˜ âŒ\n' +
          'ë©”ì‹œì§€: ' + err.name + ' - ' + err.message +
          '\n\në¸Œë¼ìš°ì € ì£¼ì†Œì°½ ì˜† ìë¬¼ì‡ (ğŸ”’) ì•„ì´ì½˜ì—ì„œ ì¹´ë©”ë¼ ê¶Œí•œì´ ì°¨ë‹¨ë¼ ìˆì§€ ì•Šì€ì§€ í™•ì¸í•´.';
        alert('ì¹´ë©”ë¼ ì˜¤ë¥˜: ' + err.name + '\\n' + err.message);
      }
    }

    startBtn.addEventListener('click', startCamera);
  </script>
</body>
</html>
