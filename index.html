<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>자동 문제 풀이 – 복구 테스트</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;margin:20px}
  .card{border:1px solid #eaeaea;border-radius:12px;padding:14px;margin:12px 0}
  button{padding:10px 14px;border:0;border-radius:10px;font-weight:700;cursor:pointer;background:#111;color:#fff}
  pre{white-space:pre-wrap;background:#fafafa;border:1px solid #eee;border-radius:8px;padding:10px;min-height:80px}
  video,canvas{width:100%;max-width:460px;background:#111;border-radius:12px}
</style>
</head>
<body>
<h1>자동 문제 풀이 – 화면 복구 OK</h1>

<div class="card">
  <p>지금은 <b>화면이 보이는지</b> 확인하는 단계입니다. 아래 버튼이 보이면 UI는 정상입니다.</p>
  <div style="display:flex;gap:8px;flex-wrap:wrap">
    <button id="btnCam">아이폰 카메라 허용</button>
    <button id="btnScreen">화면 공유 시작(미러링 창 선택)</button>
    <button id="btnCheck">상태 점검</button>
  </div>
  <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:10px">
    <video id="v" autoplay playsinline muted></video>
    <canvas id="c" width="640" height="480"></canvas>
  </div>
</div>

<div class="card">
  <h3>상태 / 에러 로그</h3>
  <pre id="log"></pre>
</div>

<script>
const log = document.getElementById('log');
function logln(s){ log.textContent += (s + '\n'); }

document.getElementById('btnCam').onclick = async ()=>{
  try{
    const s = await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'},audio:false});
    document.getElementById('v').srcObject = s;
    logln('카메라 연결 OK');
  }catch(e){ logln('카메라 오류: '+e.message); }
};
document.getElementById('btnScreen').onclick = async ()=>{
  try{
    const s = await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:'window'},audio:false});
    document.getElementById('v').srcObject = s;
    logln('화면 공유 연결 OK (미러링 창 선택됨)');
  }catch(e){ logln('화면 공유 오류/취소: '+e.message); }
};
document.getElementById('btnCheck').onclick = ()=>{
  logln('페이지 로드 확인, JS 실행 정상');
};
logln('페이지 렌더 OK');
</script>
</body>
</html>
